<!DOCTYPE html>
<html lang="ar" dir="rtl" id="html-root">
<head>
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self';
        script-src 'self' 'unsafe-inline' 'unsafe-eval';
        style-src 'self' https://fonts.googleapis.com https://cdnjs.cloudflare.com 'unsafe-inline';
        font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com;
        img-src 'self' data:;
        connect-src 'self';
        frame-ancestors 'none';
        base-uri 'self';
        form-action 'self';
        object-src 'none';
    ">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">
    
    <meta property="og:site_name" content="Algorithmes & C">
    <script type="application/ld+json">
    {
      "@context": "",
      "@type": "WebSite",
      "name": "Algorithmes & C",
      "alternateName": "تعلم لغة C والخوارزميات",
      "url": "https://bibarss39-sudo.github.io/bibarss39/"
    }
    </script>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>أكواد C - معمل الترميز التفاعلي</title>
    <link rel="icon" type="image/png" href="favicon.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;600;700&family=Poppins:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-primary: #0b1120;
            --bg-secondary: #141c2f;
            --card-bg: rgba(25, 35, 55, 0.85);
            --accent: #3b82f6;
            --accent-light: #60a5fa;
            --accent-dark: #2563eb;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --code-bg: rgba(0, 0, 0, 0.3);
            --border: rgba(148, 163, 184, 0.15);
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.25);
            --shadow-md: 0 10px 25px rgba(0, 0, 0, 0.35);
            --shadow-lg: 0 16px 40px rgba(59, 130, 246, 0.2);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Tajawal', 'Poppins', sans-serif;
            background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary));
            color: var(--text-primary);
            padding: 20px;
            min-height: 100vh;
            overflow-x: hidden;
            line-height: 1.6;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background: linear-gradient(90deg, var(--accent), #0ea5e9, #00eaff);
            opacity: 0;
            transition: opacity 0.4s ease;
            z-index: 1000;
            pointer-events: none;
        }

        body.scrolling::before {
            opacity: 1;
        }

        nav {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 0 10px;
            flex-wrap: wrap;
            gap: 16px;
        }

        .home-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            color: white;
            background: linear-gradient(135deg, var(--accent), var(--accent-light));
            padding: 12px 20px;
            border-radius: 16px;
            font-size: 17px;
            font-weight: 600;
            transition: var(--transition);
            box-shadow: var(--shadow-sm);
        }

        .home-btn:hover {
            transform: translateY(-3px) scale(1.03);
            box-shadow: var(--shadow-lg);
        }

        .search-box {
            flex: 1;
            max-width: 300px;
            padding: 12px 20px;
            border-radius: 14px;
            border: 1px solid var(--border);
            background: rgba(255, 255, 255, 0.07);
            color: white;
            font-size: 16px;
            outline: none;
            transition: var(--transition);
        }

        .search-box:focus,
        .search-box.highlighted {
            border-color: var(--accent-light);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
            background: rgba(255, 255, 255, 0.1);
        }

        .translate-btn {
            width: 60px;
            height: 42px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 14px;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow-sm);
        }

        .translate-btn:hover {
            background: var(--accent-light);
            transform: scale(1.08);
            box-shadow: 0 6px 16px rgba(96, 165, 250, 0.5);
        }

        .header-container {
            text-align: center;
            margin-bottom: 25px;
        }

        h1 {
            font-size: 2.4rem;
            margin-bottom: 10px;
            color: var(--accent-light);
            text-shadow: 0 2px 8px rgba(59, 130, 246, 0.2);
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .hint-box {
            position: relative;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.12), rgba(14, 165, 233, 0.1));
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 18px;
            padding: 18px 24px;
            margin: 0 auto 28px;
            max-width: 720px;
            font-size: 1.1rem;
            color: var(--accent-light);
            text-align: center;
            font-weight: 600;
            box-shadow: 
                0 4px 20px rgba(0, 0, 0, 0.15),
                0 0 0 0 rgba(59, 130, 246, 0.4);
            transition: var(--transition);
            animation: fadeInUp 0.6s ease-out, pulseGlow 3s ease-in-out 1.2s infinite;
            overflow: hidden;
        }

        .hint-box:hover {
            transform: translateY(-4px) scale(1.01);
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(14, 165, 233, 0.15));
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.25),
                0 0 12px rgba(59, 130, 246, 0.5);
            border-color: rgba(96, 165, 250, 0.7);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.98);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @keyframes pulseGlow {
            0%, 100% {
                box-shadow: 
                    0 4px 20px rgba(0, 0, 0, 0.15),
                    0 0 0 0 rgba(59, 130, 246, 0.4);
            }
            50% {
                box-shadow: 
                    0 4px 20px rgba(0, 0, 0, 0.15),
                    0 0 0 8px rgba(59, 130, 246, 0.15);
            }
        }

        .category-filters {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.07);
            border: 1px solid var(--border);
            border-radius: 12px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition);
            font-family: 'Tajawal', sans-serif;
            font-weight: 500;
        }

        .filter-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .filter-btn.active {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        #codesContainer {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 22px;
            margin-top: 10px;
        }

        .code-box {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 18px;
            padding: 24px 18px;
            cursor: pointer;
            text-align: center;
            font-size: 18px;
            font-family: 'JetBrains Mono', 'Courier New', monospace;
            transition: var(--transition);
            box-shadow: var(--shadow-md);
            color: #e0f2fe;
            position: relative;
            overflow: hidden;
            will-change: transform, box-shadow;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .code-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(to bottom, var(--accent), #0ea5e9);
            transform: scaleY(0);
            transform-origin: top;
            transition: transform 0.4s ease;
        }

        .code-box:hover::before {
            transform: scaleY(1);
        }

        .code-box:hover {
            transform: translateY(-6px);
            box-shadow: var(--shadow-lg), 0 0 0 1px rgba(96, 165, 250, 0.3);
            background: rgba(30, 45, 75, 0.85);
        }

        .code-content {
            flex: 1;
        }

        .code-category {
            font-size: 0.8rem;
            padding: 4px 12px;
            background: rgba(59, 130, 246, 0.2);
            border-radius: 20px;
            color: var(--accent-light);
            font-family: 'Tajawal', sans-serif;
            display: inline-block;
            margin-top: 8px;
        }

        .code-box.pulse {
            animation: clickPulse 0.6s ease-out;
        }

        @keyframes clickPulse {
            0% {
                transform: scale(1);
                box-shadow: var(--shadow-md);
            }
            30% {
                transform: scale(1.04) translateY(-2px);
                box-shadow: 
                    0 8px 30px rgba(59, 130, 246, 0.6),
                    0 0 0 8px rgba(59, 130, 246, 0.2);
            }
            100% {
                transform: scale(1) translateY(0);
                box-shadow: var(--shadow-md);
            }
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.75);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            backdrop-filter: blur(4px);
        }

        .modal-content {
            width: 90%;
            max-width: 550px;
            background: rgba(25, 35, 55, 0.95);
            padding: 32px;
            border-radius: 22px;
            text-align: center;
            color: var(--text-primary);
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
            animation: modalSlideIn 0.4s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background: linear-gradient(90deg, var(--accent), #0ea5e9);
        }

        .modal-header {
            margin-bottom: 25px;
        }

        .modal-title {
            font-size: 1.8rem;
            color: var(--accent-light);
            font-family: 'JetBrains Mono', monospace;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .modal-category {
            color: var(--text-secondary);
            font-size: 0.9rem;
            background: rgba(59, 130, 246, 0.1);
            padding: 4px 12px;
            border-radius: 20px;
            display: inline-block;
        }

        .modal-body {
            text-align: right;
            margin-bottom: 30px;
        }

        .explanation {
            background: var(--code-bg);
            padding: 25px;
            border-radius: 12px;
            border-right: 3px solid var(--accent);
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .explanation p {
            font-size: 1.25rem;
            line-height: 1.8;
            color: var(--text-secondary);
        }

        .modal-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 25px;
        }

        .step-indicator {
            display: flex;
            gap: 8px;
        }

        .step-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transition: var(--transition);
        }

        .step-dot.active {
            background: var(--accent);
            transform: scale(1.2);
        }

        .buttons {
            display: flex;
            gap: 14px;
        }

        button {
            padding: 12px 24px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            border-radius: 14px;
            cursor: pointer;
            transition: var(--transition);
            background: var(--accent);
            color: white;
            min-width: 100px;
            box-shadow: var(--shadow-sm);
            font-family: 'Tajawal', sans-serif;
        }

        button:hover {
            background: var(--accent-light);
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(59, 130, 246, 0.4);
        }

        button.secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-secondary);
        }

        button.secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        body.lang-en nav,
        body.lang-fr nav {
            flex-direction: row-reverse;
        }

        body.lang-en .home-btn,
        body.lang-fr .home-btn {
            flex-direction: row-reverse;
        }

        body.lang-en .modal-body,
        body.lang-fr .modal-body {
            text-align: left;
        }

        @media (max-width: 768px) {
            nav {
                flex-direction: column;
                align-items: stretch;
            }
            .home-btn, .translate-btn {
                width: 100%;
                justify-content: center;
            }
            .search-box {
                max-width: 100%;
            }
            .header-container {
                padding: 0 10px;
            }
            h1 {
                font-size: 2rem;
            }
            .subtitle {
                font-size: 1rem;
            }
            .hint-box {
                font-size: 1rem;
                padding: 14px 20px;
            }
            .category-filters {
                gap: 8px;
            }
            .filter-btn {
                padding: 8px 16px;
                font-size: 0.9rem;
            }
            #codesContainer {
                grid-template-columns: 1fr;
                gap: 18px;
            }
            .code-box {
                padding: 20px 16px;
                font-size: 17px;
            }
            .modal-content {
                padding: 24px 18px;
            }
            .modal-footer {
                flex-direction: column;
                gap: 15px;
                align-items: stretch;
            }
            .buttons {
                order: -1;
                flex-direction: column;
            }
            button {
                width: 100%;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.8rem;
            }
            .hint-box {
                font-size: 0.95rem;
                padding: 12px 16px;
            }
            .modal-content {
                padding: 20px 15px;
            }
            .modal-title {
                font-size: 1.5rem;
            }
            .explanation {
                padding: 20px;
                min-height: 120px;
            }
            .explanation p {
                font-size: 1.1rem;
            }
        }
    </style>
</head>

<body class="lang-ar">
    
    <nav>
        <a href="asasi.html" class="home-btn">
            <i class="fas fa-home"></i>
            <span id="homeText">الرئيسية</span>
        </a>

        <input type="text" class="search-box" id="search" placeholder="بحث / Search / Recherche">

        <button class="translate-btn" onclick="toggleLanguage()" id="langBtn">AR</button>
    </nav>

    <div class="header-container">
        <h1 id="pageTitle">معمل أكواد C التفاعلي</h1>
        <p class="subtitle" id="subtitle">تعلم وفهم أهم أوامر لغة C من خلال شرح متعدد اللغات وأمثلة تطبيقية</p>
    </div>

    
    <div class="hint-box">
        <span id="hintText">انقر على أي صندوق لعرض شرح مفصّل باللغات: العربية / الفرنسية / الإنجليزية</span>
    </div>

    
    <div class="category-filters">
        <button class="filter-btn active" onclick="filterCodes('all')">الكل</button>
        <button class="filter-btn" onclick="filterCodes('output')">الإخراج</button>
        <button class="filter-btn" onclick="filterCodes('input')">الإدخال</button>
        <button class="filter-btn" onclick="filterCodes('loop')">الحلقات</button>
        <button class="filter-btn" onclick="filterCodes('condition')">الشروط</button>
        <button class="filter-btn" onclick="filterCodes('operator')">المشغلات</button>
        <button class="filter-btn" onclick="filterCodes('type')">أنواع البيانات</button>
        <button class="filter-btn" onclick="filterCodes('control')">التحكم</button>
        <button class="filter-btn" onclick="filterCodes('comment')">التعليقات</button>
    </div>

    <div id="codesContainer">
        
    </div>

   
    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="title"></h2>
                <div class="modal-category" id="modalCategory"></div>
            </div>
            
            <div class="modal-body">
                <div class="explanation">
                    <p id="content"></p>
                </div>
            </div>

            <div class="modal-footer">
                <div class="step-indicator" id="stepIndicator">
                    <div class="step-dot active" data-step="1"></div>
                    <div class="step-dot" data-step="2"></div>
                    <div class="step-dot" data-step="3"></div>
                </div>

                <div class="buttons">
                    <button class="secondary" onclick="closeModal()" id="closeBtn">غلق</button>
                    <button class="secondary" onclick="prevStep()" id="prevBtn" style="display: none;">
                        <i class="fas fa-arrow-right"></i> رجوع
                    </button>
                    <button onclick="nextStep()" id="nextBtn">
                        التالي <i class="fas fa-arrow-left"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const Security = {
            sanitize: function(text) {
                if (!text) return '';
                const temp = document.createElement('div');
                temp.textContent = text;
                return temp.innerHTML;
            },
            
            validateLink: function(url) {
                if (!url) return false;
                try {
                    const urlObj = new URL(url, window.location.origin);
                    const allowedProtocols = ['http:', 'https:', 'mailto:', 'tel:'];
                    const allowedDomains = [
                        window.location.hostname,
                        'bibarss39-sudo.github.io'
                    ];
                    
                    if (!allowedProtocols.includes(urlObj.protocol)) return false;
                    return allowedDomains.some(domain => 
                        urlObj.hostname === domain || urlObj.hostname.endsWith('.' + domain)
                    );
                } catch (e) {
                    return url.startsWith('/') || url.startsWith('./') || url.startsWith('../');
                }
            },
            
            protect: function() {
                try {
                    Object.freeze(Object.prototype);
                } catch (e) {}
            }
        };

        let current = 1;
        let step = 1;
        let lang = "ar";
        let currentFilter = 'all';

        const data = {
            1: {
                title: { ar: 'printf("Hello, World!")', fr: 'printf("Hello, World!")', en: 'printf("Hello, World!")' },
                exp: {
                    ar: 'تُستخدم لطباعة نص أو قيمة على الشاشة. مثال: طباعة رسالة ترحيب.',
                    fr: 'Affiche un texte ou une valeur à l\'écran.',
                    en: 'Displays text or values on the screen.'
                },
                algFr: 'Écrire("Hello World!")',
                algExp: {
                    ar: 'تُظهر مخرجات مباشرة للمستخدم على الشاشة.',
                    fr: 'Produit une sortie textuelle.',
                    en: 'Produces textual output for the user.'
                },
                category: 'output'
            },
            2: {
                title: { ar: 'scanf("%d", &x)', fr: 'scanf("%d", &x)', en: 'scanf("%d", &x)' },
                exp: {
                    ar: 'تقرأ عددًا صحيحًا من المستخدم وتخزّنه في المتغير x.',
                    fr: 'Lit un entier saisi par l\'utilisateur et le stocke dans x.',
                    en: 'Reads an integer input from the user and stores it in x.'
                },
                algFr: 'Lire(x)',
                algExp: {
                    ar: 'تسمح بإدخال بيانات من المستخدم أثناء تشغيل البرنامج.',
                    fr: 'Permet à l\'utilisateur d\'entrer une valeur.',
                    en: 'Allows user input into a variable.'
                },
                category: 'input'
            },
            3: {
                title: { ar: 'for (int i = 0; i < 10; i++)', fr: 'for (int i = 0; i < 10; i++)', en: 'for (int i = 0; i < 10; i++)' },
                exp: {
                    ar: 'حلقة تُكرّر تنفيذ شرط من الأوامر 10 مرات (من 0 إلى 9).',
                    fr: 'Boucle qui s\'exécute exactement 10 fois (de 0 à 9).',
                    en: 'Loop that executes exactly 10 times (from 0 to 9).'
                },
                algFr: 'Pour i de 0 à 9 faire',
                algExp: {
                    ar: 'تُستخدم عندما تعرف عدد مرات التكرار مسبقًا.',
                    fr: 'Répète un bloc un nombre fixe de fois.',
                    en: 'Repeats a block a fixed number of times.'
                },
                category: 'loop'
            },
            4: {
                title: { ar: 'do { } while (x < 10)', fr: 'do { } while (x < 10)', en: 'do { } while (x < 10)' },
                exp: {
                    ar: 'تنفّذ شرط مرة واحدة على الأقل، ثم تكررها طالما أن x أقل من 10.',
                    fr: 'Exécute le bloc au moins une fois, puis répète tant que la condition est vraie.',
                    en: 'Executes the block at least once, then repeats while condition is true.'
                },
                algFr: 'Répéter ... jusqu\'à (x >= 10)',
                algExp: {
                    ar: 'مثالية عندما تريد تنفيذ شرط قبل التحقق من الشرط.',
                    fr: 'Utilisée quand le bloc doit s\'exécuter avant la vérification.',
                    en: 'Used when the block must run before checking the condition.'
                },
                category: 'loop'
            },
            5: {
                title: { ar: 'while (x < 10)', fr: 'while (x < 10)', en: 'while (x < 10)' },
                exp: {
                    ar: 'تكرّر تنفيذ شرط طالما أن الشرط (x < 10) صحيح.',
                    fr: 'Répète le bloc tant que x < 10 est vrai.',
                    en: 'Repeats the block while x < 10 is true.'
                },
                algFr: 'Tant que (x < 10)',
                algExp: {
                    ar: 'لا تُنفّذ الكتلة أبدًا إذا كان الشرط خاطئًا من البداية.',
                    fr: 'N\'exécute pas le bloc si la condition est fausse au départ.',
                    en: 'Does not run the block if condition is initially false.'
                },
                category: 'loop'
            },
            6: {
                title: { ar: '!x', fr: '!x', en: '!x' },
                exp: {
                    ar: 'يعكس قيمة الشرط: إذا كانت x تساوي 0 يصبح الناتج "صح"، والعكس.',
                    fr: 'Opérateur logique qui inverse la valeur : vrai si x vaut 0, faux sinon.',
                    en: 'Logical operator that inverts the value: true if x is 0, false otherwise.'
                },
                algFr: 'Non(x)',
                algExp: {
                    ar: 'يُستخدم للتأكد من أن قيمة ما غير صحيحة (أو تساوي صفر).',
                    fr: 'Permet de tester qu\'une valeur est fausse (ou nulle).',
                    en: 'Used to test that a value is false (or zero).'
                },
                category: 'operator'
            },
            7: {
                title: { ar: '%d', fr: '%d', en: '%d' },
                exp: {
                    ar: 'رمز تنسيق لطباعة أو قراءة عدد صحيح (مثل 42 أو -5).',
                    fr: 'Spécificateur de format pour un entier (int).',
                    en: 'Format specifier for integers (int).'
                },
                algFr: 'Entier',
                algExp: {
                    ar: 'يُستخدم مع printf أو scanf للتعامل مع الأعداد الصحيحة.',
                    fr: 'Utilisé avec printf/scanf pour les entiers.',
                    en: 'Used with printf/scanf for integer values.'
                },
                category: 'output'
            },
            8: {
                title: { ar: '%f', fr: '%f', en: '%f' },
                exp: {
                    ar: 'رمز تنسيق لطباعة أو قراءة عدد عشري (مثل 3.14).',
                    fr: 'Spécificateur pour un nombre à virgule flottante.',
                    en: 'Format specifier for floating-point numbers.'
                },
                algFr: 'Réel',
                algExp: {
                    ar: 'يُستخدم للأرقام ذات الفاصلة العشرية.',
                    fr: 'Utilisé pour les nombres décimaux.',
                    en: 'Used for decimal numbers.'
                },
                category: 'output'
            },
            9: {
                title: { ar: '%c', fr: '%c', en: '%c' },
                exp: {
                    ar: 'رمز تنسيق لطباعة أو قراءة حرف واحد (مثل \'A\' أو \'?\').',
                    fr: 'Spécificateur pour un seul caractère.',
                    en: 'Format specifier for a single character.'
                },
                algFr: 'Caractère',
                algExp: {
                    ar: 'يتعامل مع متغير يحتوي على حرف واحد فقط.',
                    fr: 'Traite une variable contenant un seul caractère.',
                    en: 'Handles a variable holding one character.'
                },
                category: 'output'
            },
            10: {
                title: { ar: '+=', fr: '+=', en: '+=' },
                exp: {
                    ar: 'يجمع قيمة على المتغير ويخزّن الناتج فيه: x += 3 تعني x = x + 3.',
                    fr: 'Ajoute une valeur : x += 3 équivaut à x = x + 3.',
                    en: 'Adds a value: x += 3 is equivalent to x = x + 3.'
                },
                algFr: 'x ← x + 3',
                algExp: {
                    ar: 'طريقة مختصرة لكتابة عملية الجمع والتخزين معًا.',
                    fr: 'Forme abrégée pour l\'addition et l\'affectation.',
                    en: 'Shorthand for addition and assignment.'
                },
                category: 'operator'
            },
            11: {
                title: { ar: 'int', fr: 'int', en: 'int' },
                exp: {
                    ar: 'نوع بيانات لتخزين الأعداد الصحيحة (مثل 100، -20، 0).',
                    fr: 'Type de données pour les entiers (ex: -5, 0, 100).',
                    en: 'Data type for integers (e.g., -5, 0, 100).'
                },
                algFr: 'Entier',
                algExp: {
                    ar: 'لا يدعم الأعداد ذات الفاصلة العشرية.',
                    fr: 'Stocke des valeurs numériques sans décimales.',
                    en: 'Stores numeric values without decimals.'
                },
                category: 'type'
            },
            12: {
                title: { ar: 'float', fr: 'float', en: 'float' },
                exp: {
                    ar: 'نوع بيانات لتخزين الأعداد العشرية (مثل 2.5 أو -3.1415).',
                    fr: 'Type pour les nombres décimaux (ex: 3.14, -2.5).',
                    en: 'Data type for decimal numbers (e.g., 3.14, -2.5).'
                },
                algFr: 'Réel',
                algExp: {
                    ar: 'يُستخدم للأرقام التي تحتوي على فاصلة عشرية.',
                    fr: 'Utilisé pour les nombres à virgule flottante.',
                    en: 'Used for floating-point numbers.'
                },
                category: 'type'
            },
            13: {
                title: { ar: 'char', fr: 'char', en: 'char' },
                exp: {
                    ar: 'نوع بيانات لتخزين حرف واحد (مثل \'m\' أو \'$\').',
                    fr: 'Type pour un seul caractère (ex: \'A\', \'7\').',
                    en: 'Data type for a single character (e.g., \'A\', \'7\').'
                },
                algFr: 'Caractère',
                algExp: {
                    ar: 'يحتوي على رمز واحد من جدول الحروف (مثل ASCII).',
                    fr: 'Contient un symbole du tableau ASCII.',
                    en: 'Holds one symbol from the ASCII table.'
                },
                category: 'type'
            },
            14: {
                title: { ar: 'chaine', fr: 'chaine', en: 'string' },
                exp: {
                    ar: 'في لغة C، السلسلة النصية هي مصفوفة من الحروف تنتهي بـ \'\\0\'.',
                    fr: 'En C, une chaîne est un tableau de caractères terminé par \'\\0\'.',
                    en: 'In C, a string is a char array ending with \'\\0\'.'
                },
                algFr: 'Chaîne de caractères',
                algExp: {
                    ar: 'تُخزّن كلمات أو جمل كاملة (مثل "مرحبا").',
                    fr: 'Sert à stocker des mots ou des phrases.',
                    en: 'Used to store words or sentences.'
                },
                category: 'type'
            },
            15: {
                title: { ar: '#include', fr: '#include', en: '#include' },
                exp: {
                    ar: 'يُدخل مكتبة خارجية (مثل stdio.h) لاستخدام دوالها الجاهزة.',
                    fr: 'Inclut une bibliothèque externe (ex: stdio.h).',
                    en: 'Includes an external library (e.g., stdio.h) to use its functions.'
                },
                algFr: 'Utiliser Bibliothèque',
                algExp: {
                    ar: 'بدونه، لا يمكنك استخدام دوال مثل printf أو scanf.',
                    fr: 'Permet d\'utiliser des fonctions prédéfinies.',
                    en: 'Enables use of predefined functions like printf and scanf.'
                },
                category: 'control'
            },
            16: {
                title: { ar: 'return 0;', fr: 'return 0;', en: 'return 0;' },
                exp: {
                    ar: 'تنهي دالة main() وتشير إلى أن البرنامج انتهى بنجاح (بدون أخطاء).',
                    fr: 'Termine main() avec succès (code 0 = succès).',
                    en: 'Ends main() and indicates successful program termination.'
                },
                algFr: 'Retourner 0',
                algExp: {
                    ar: 'القيمة 0 تعني "نجاح"، وأي رقم آخر يدل على خطأ.',
                    fr: 'Indique que l\'algorithme s\'est terminé sans erreur.',
                    en: 'Means the algorithm ended without errors.'
                },
                category: 'control'
            },
            17: {
                title: { ar: 'i++', fr: 'i++', en: 'i++' },
                exp: {
                    ar: 'يزيد قيمة المتغير i بمقدار 1. مثال: إذا كانت i=5، تصبح i=6.',
                    fr: 'Incrémente i de 1 (post-incrémentation).',
                    en: 'Increments i by 1 (post-increment).'
                },
                algFr: 'i ← i + 1',
                algExp: {
                    ar: 'طريقة مختصرة لكتابة i = i + 1.',
                    fr: 'Forme abrégée pour incrémenter la variable.',
                    en: 'Shorthand to increase the variable by one.'
                },
                category: 'operator'
            },
            18: {
                title: { ar: 'i--', fr: 'i--', en: 'i--' },
                exp: {
                    ar: 'يقلل قيمة المتغير i بمقدار 1. مثال: إذا كانت i=5، تصبح i=4.',
                    fr: 'Décrémente i de 1 (post-décrémentation).',
                    en: 'Decrements i by 1 (post-decrement).'
                },
                algFr: 'i ← i - 1',
                algExp: {
                    ar: 'طريقة مختصرة لكتابة i = i - 1.',
                    fr: 'Forme abrégée pour décrémenter la variable.',
                    en: 'Shorthand to decrease the variable by one.'
                },
                category: 'operator'
            },
            19: {
                title: { ar: 'mat[40]', fr: 'mat[40]', en: 'mat[40]' },
                exp: {
                    ar: 'مصفوفة تحتوي على 40 عنصرًا مرقّمًا من 0 إلى 39.',
                    fr: 'Tableau de 40 éléments indexés de 0 à 39.',
                    en: 'Array with 40 elements, indexed from 0 to 39.'
                },
                algFr: 'Tableau[40]',
                algExp: {
                    ar: 'تُخزّن عدة قيم من نفس النوع في مكان واحد.',
                    fr: 'Stocke un ensemble de valeurs du même type.',
                    en: 'Stores a collection of values of the same type.'
                },
                category: 'type'
            },
            20: {
                title: { ar: 'if', fr: 'if', en: 'if' },
                exp: {
                    ar: 'تنفّذ كتلة من الأوامر فقط إذا كان الشرط صحيحًا.',
                    fr: 'Structure conditionnelle : exécute le bloc si la condition est vraie.',
                    en: 'Conditional statement: executes block if condition is true.'
                },
                algFr: 'Si (condition)',
                algExp: {
                    ar: 'تُستخدم لاتخاذ قرارات داخل البرنامج.',
                    fr: 'Utilisée pour prendre des décisions dans le programme.',
                    en: 'Used to make decisions in the program.'
                },
                category: 'condition'
            },
            21: {
                title: { ar: 'else', fr: 'else', en: 'else' },
                exp: {
                    ar: 'تنفّذ كتلة بديلة إذا كان شرط if غير صحيح.',
                    fr: 'Exécute un bloc alternatif si la condition if est fausse.',
                    en: 'Executes an alternative block if the if condition is false.'
                },
                algFr: 'Sinon',
                algExp: {
                    ar: 'توفر بديلاً عند عدم تحقق الشرط الأول.',
                    fr: 'Fournit une alternative lorsque la condition échoue.',
                    en: 'Provides an alternative path when condition fails.'
                },
                category: 'condition'
            },
            22: {
                title: { ar: 'switch(x)', fr: 'switch(x)', en: 'switch(x)' },
                exp: {
                    ar: 'يختار ويُنفّذ كتلة من الأوامر بناءً على قيمة المتغير x.',
                    fr: 'Évalue une expression et exécute le cas correspondant.',
                    en: 'Evaluates an expression and executes a matching case.'
                },
                algFr: 'Selon(x)',
                algExp: {
                    ar: 'بديل أكثر تنظيمًا لعدة عبارات if-else.',
                    fr: 'Alternative élégante aux if-else imbriqués.',
                    en: 'Clean alternative to nested if-else statements.'
                },
                category: 'condition'
            },
            23: {
                title: { ar: 'break;', fr: 'break;', en: 'break;' },
                exp: {
                    ar: 'يخرج فورًا من الحلقة (for, while) أو من كتلة switch.',
                    fr: 'Termine immédiatement la boucle ou le bloc switch.',
                    en: 'Immediately exits the current loop or switch block.'
                },
                algFr: 'Quitter',
                algExp: {
                    ar: 'يُستخدم لإيقاف الحلقة قبل انتهائها الطبيعي.',
                    fr: 'Permet une sortie anticipée d\'une boucle ou switch.',
                    en: 'Used for early exit from a loop or switch.'
                },
                category: 'control'
            },
            24: {
                title: { ar: 'continue;', fr: 'continue;', en: 'continue;' },
                exp: {
                    ar: 'يتخطى باقي الحلقة الحالية ويبدأ التكرار التالي فورًا.',
                    fr: 'Ignore le reste de la boucle et passe à l\'itération suivante.',
                    en: 'Skips the rest of the loop and jumps to the next iteration.'
                },
                algFr: 'Continuer',
                algExp: {
                    ar: 'مفيد لتخطي بعض القيم دون إيقاف الحلقة بالكامل.',
                    fr: 'Utile pour ignorer certaines itérations.',
                    en: 'Useful to skip certain iterations without breaking the loop.'
                },
                category: 'control'
            },
            25: {
                title: { ar: '// comment', fr: '// comment', en: '// comment' },
                exp: {
                    ar: 'تعليق أحادي السطر: يُهمل عند تشغيل البرنامج ويُستخدم للشرح.',
                    fr: 'Commentaire sur une ligne : ignoré par le compilateur.',
                    en: 'Single-line comment: ignored by the compiler.'
                },
                algFr: '// commentaire',
                algExp: {
                    ar: 'لا يؤثر على البرنامج، فقط للمطورين.',
                    fr: 'Sert à expliquer ou désactiver temporairement du code.',
                    en: 'Used to explain code or temporarily disable a line.'
                },
                category: 'comment'
            },
            26: {
                title: { ar: '/* comment */', fr: '/* comment */', en: '/* comment */' },
                exp: {
                    ar: 'تعليق متعدد الأسطر: يُستخدم لشرح كتل كبيرة من الكود.',
                    fr: 'Commentaire multi-lignes : pour expliquer du code étendu.',
                    en: 'Multi-line comment: used to explain larger code sections.'
                },
                algFr: '/* commentaire */',
                algExp: {
                    ar: 'يبدأ بـ /* وينتهي بـ */، ولا يُنفّذ أبدًا.',
                    fr: 'Commence par /* et finit par */, ignoré à la compilation.',
                    en: 'Begins with /* and ends with */, completely ignored during compilation.'
                },
                category: 'comment'
            }
        };

        const categoryLabels = {
            all: { ar: 'الكل', fr: 'Tous', en: 'All' },
            output: { ar: 'الإخراج', fr: 'Sortie', en: 'Output' },
            input: { ar: 'الإدخال', fr: 'Entrée', en: 'Input' },
            loop: { ar: 'الحلقات', fr: 'Boucles', en: 'Loops' },
            condition: { ar: 'الشروط', fr: 'Conditions', en: 'Conditions' },
            operator: { ar: 'المشغلات', fr: 'Opérateurs', en: 'Operators' },
            type: { ar: 'أنواع البيانات', fr: 'Types', en: 'Data Types' },
            control: { ar: 'التحكم', fr: 'Contrôle', en: 'Control' },
            comment: { ar: 'التعليقات', fr: 'Commentaires', en: 'Comments' }
        };

        function initializeCodes() {
            const container = document.getElementById('codesContainer');
            container.innerHTML = '';
            
            Object.keys(data).forEach(key => {
                const item = data[key];
                const box = document.createElement('div');
                box.className = 'code-box';
                box.setAttribute('data-category', item.category);
                box.setAttribute('data-id', key);
                
                box.innerHTML = `
                    <div class="code-content">${Security.sanitize(item.title[lang])}</div>
                    <div class="code-category">${Security.sanitize(categoryLabels[item.category][lang])}</div>
                `;
                
                box.addEventListener('click', function(e) {
                    handleClick(this, parseInt(key));
                });
                
                container.appendChild(box);
            });
            
            filterCodes(currentFilter);
        }

        function handleClick(element, index) {
            element.classList.add('pulse');
            setTimeout(() => {
                element.classList.remove('pulse');
            }, 600);
            
            const searchBox = document.getElementById('search');
            searchBox.value = Security.sanitize(data[index].title[lang]);
            searchBox.classList.add('highlighted');
            setTimeout(() => {
                searchBox.classList.remove('highlighted');
            }, 2000);
            
            openModal(index);
        }

        function filterCodes(category) {
            currentFilter = category;
            const boxes = document.querySelectorAll('.code-box');
            const filterBtns = document.querySelectorAll('.filter-btn');
            
            filterBtns.forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.querySelector(`.filter-btn[onclick="filterCodes('${category}')"]`).classList.add('active');
            
            boxes.forEach(box => {
                if (category === 'all' || box.getAttribute('data-category') === category) {
                    box.style.display = 'flex';
                } else {
                    box.style.display = 'none';
                }
            });
        }

        function updateLangBtn() {
            const labels = { ar: 'AR', fr: 'FR', en: 'EN' };
            document.getElementById("langBtn").textContent = labels[lang];
        }

        function translateUI() {
            document.getElementById("html-root").setAttribute("lang", lang);
            document.getElementById("html-root").setAttribute("dir", lang === "ar" ? "rtl" : "ltr");
            document.body.className = `lang-${lang}`;

            const labels = {
                ar: { 
                    home: "الرئيسية", 
                    search: "بحث عن كود...", 
                    close: "غلق", 
                    next: "التالي", 
                    back: "رجوع",
                    subtitle: "تعلم وفهم أهم أوامر لغة C من خلال شرح متعدد اللغات",
                    hint: "انقر على أي صندوق لعرض شرح مفصّل باللغات: العربية / الفرنسية / الإنجليزية"
                },
                fr: { 
                    home: "Accueil", 
                    search: "Rechercher un code...", 
                    close: "Fermer", 
                    next: "Suivant", 
                    back: "Précédent",
                    subtitle: "Apprenez et comprenez les commandes C importantes via des explications multilingues",
                    hint: "Cliquez sur une boîte pour afficher une explication détaillée en arabe / français / anglais"
                },
                en: { 
                    home: "Home", 
                    search: "Search for code...", 
                    close: "Close", 
                    next: "Next", 
                    back: "Back",
                    subtitle: "Learn and understand important C commands through multilingual explanations",
                    hint: "Click any box to see a detailed explanation in Arabic / French / English"
                }
            };

            const t = labels[lang];
            document.getElementById("homeText").textContent = Security.sanitize(t.home);
            document.getElementById("search").placeholder = Security.sanitize(t.search);
            document.getElementById("closeBtn").textContent = Security.sanitize(t.close);
            document.getElementById("nextBtn").innerHTML = Security.sanitize(t.next) + ' <i class="fas fa-arrow-left"></i>';
            document.getElementById("prevBtn").innerHTML = '<i class="fas fa-arrow-right"></i> ' + Security.sanitize(t.back);
            document.getElementById("subtitle").textContent = Security.sanitize(t.subtitle);
            document.getElementById("hintText").textContent = Security.sanitize(t.hint);

            document.querySelectorAll('.filter-btn').forEach(btn => {
                const category = btn.getAttribute('onclick').match(/'([^']+)'/)[1];
                btn.textContent = Security.sanitize(categoryLabels[category][lang]);
            });

            initializeCodes();

            updateLangBtn();

            if (document.getElementById("modal").style.display === "flex") {
                openModal(current);
            }
        }

        function toggleLanguage() {
            lang = lang === "ar" ? "fr" : lang === "fr" ? "en" : "ar";
            translateUI();
        }

        function openModal(i) {
            current = i;
            step = 1;
            document.getElementById("modal").style.display = "flex";
            
            const item = data[i];
            document.getElementById("title").textContent = Security.sanitize(item.title[lang]);
            document.getElementById("modalCategory").textContent = Security.sanitize(categoryLabels[item.category][lang]);
            document.getElementById("content").textContent = Security.sanitize(item.exp[lang]);
            
            updateModalButtons();
            updateStepIndicator();
        }

        function nextStep() {
            if (step === 1) {
                document.getElementById("content").textContent = Security.sanitize(data[current].algFr);
                step = 2;
            } else if (step === 2) {
                document.getElementById("content").textContent = Security.sanitize(data[current].algExp[lang]);
                step = 3;
            } else {
                closeModal();
                return;
            }
            
            updateModalButtons();
            updateStepIndicator();
        }

        function prevStep() {
            if (step === 2) {
                document.getElementById("content").textContent = Security.sanitize(data[current].exp[lang]);
                step = 1;
            } else if (step === 3) {
                document.getElementById("content").textContent = Security.sanitize(data[current].algFr);
                step = 2;
            }
            
            updateModalButtons();
            updateStepIndicator();
        }

        function updateModalButtons() {
            const prevBtn = document.getElementById("prevBtn");
            const nextBtn = document.getElementById("nextBtn");
            
            prevBtn.style.display = step > 1 ? "inline-block" : "none";
            
            if (step === 3) {
                nextBtn.innerHTML = Security.sanitize(lang === "ar" ? "إغلاق" : (lang === "fr" ? "Fermer" : "Close")) + 
                    ' <i class="fas fa-arrow-left"></i>';
            } else {
                nextBtn.innerHTML = Security.sanitize(lang === "ar" ? "التالي" : (lang === "fr" ? "Suivant" : "Next")) + 
                    ' <i class="fas fa-arrow-left"></i>';
            }
        }

        function updateStepIndicator() {
            const dots = document.querySelectorAll('.step-dot');
            dots.forEach((dot, index) => {
                if (index + 1 === step) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
        }

        function closeModal() {
            document.getElementById("modal").style.display = "none";
        }

        document.getElementById("search").addEventListener("input", function () {
            const text = Security.sanitize(this.value.trim().toLowerCase());
            const boxes = document.querySelectorAll(".code-box");
            
            boxes.forEach(box => {
                const code = box.querySelector('.code-content').textContent.toLowerCase();
                const category = box.querySelector('.code-category').textContent.toLowerCase();
                
                if (code.includes(text) || category.includes(text)) {
                    box.style.display = currentFilter === 'all' || box.getAttribute('data-category') === currentFilter ? 'flex' : 'none';
                } else {
                    box.style.display = 'none';
                }
            });
        });

        document.querySelector('.home-btn').addEventListener('click', function(e) {
            if (!Security.validateLink(this.href)) {
                e.preventDefault();
                alert('رابط غير صالح لأسباب أمنية');
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            Security.protect();
            
            translateUI();

            if (window.self !== window.top) {
                try {
                    window.top.location = window.self.location;
                } catch (e) {
                    document.body.innerHTML = '<div style="padding: 20px; text-align: center; color: white;"><h2>⚠️ تحذير أمني</h2><p>تم تحميل هذه الصفحة في إطار غير مصرح به.</p><p>يرجى فتح الصفحة مباشرة في المتصفح.</p></div>';
                }
            }

            window.addEventListener('scroll', () => {
                document.body.classList.toggle('scrolling', window.scrollY > 10);
            });

            document.getElementById("modal").addEventListener("click", function (e) {
                if (e.target === this) closeModal();
            });

            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && document.getElementById("modal").style.display === "flex") {
                    closeModal();
                }
            });
        });
    </script>
</body>
</html>